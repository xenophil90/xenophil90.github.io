[{"categories":null,"contents":"   Einleitung  Mit dem Update auf die derzeit aktuelle Nextcloud-Version 23 wurde Collabora Office als bevorzugte Office-Lösung der Cloud eingeführt1.\n    Fehlerbeschreibung  Ich nutze Nextcloud in einem Docker-Setup. Collabora wird in einem eigenen Docker-Container betrieben. Auf dem Host-System läuft Apache 2 als Reverse Proxy, der die Verbindungen an die einzelnen Docker-Container weiterleitet.\nMit dem Update auf die neuste Collabora-Version zusammen mit Nextcloud 23 konnte der Collabora-Server nicht mehr gefunden werden. Somit war eine Bearbeitung von Dokumenten in der Nextcloud nicht mehr möglich. Stattdessen vermeldete Collabora, dass Dokumente nicht geöffnet werden könnten.\n   Die Lösung  Es stellte sich nach kurzer Recherche heraus, dass sich mit dem Update von Collabora einige Ordnerpfade geändert haben2. Meine Apache 2-Konfiguration hatte noch die alten Ordner-Pfade enthalten.\nDie korrigierte Fassung der Konfigurationsdatei unter /etc/apache2/sites-enabled/011-collabora.conf sieht wie folgt aus:\n\u0026lt;VirtualHost *:80\u0026gt; ServerName office.domain.de ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined AllowEncodedSlashes NoDecode SSLProxyEngine On SSLProxyVerify None SSLProxyCheckPeerCN Off SSLProxyCheckPeerName Off ProxyPreserveHost On # static html, js, images, etc. served from coolwsd # browser is the client part of Collabora Online ProxyPass /browser https://127.0.0.1:9980/browser retry=0 ProxyPassReverse /browser https://127.0.0.1:9980/browser # WOPI discovery URL ProxyPass /hosting/discovery https://127.0.0.1:9980/hosting/discovery retry=0 ProxyPassReverse /hosting/discovery https://127.0.0.1:9980/hosting/discovery # Capabilities ProxyPass /hosting/capabilities https://127.0.0.1:9980/hosting/capabilities retry=0 ProxyPassReverse /hosting/capabilities https://127.0.0.1:9980/hosting/capabilities # Main websocket ProxyPassMatch \u0026#34;/cool/(.*)/ws$\u0026#34; wss://127.0.0.1:9980/cool/$1/ws nocanon # Admin Console websocket ProxyPass /cool/adminws wss://127.0.0.1:9980/cool/adminws # Download as, Fullscreen presentation and Image upload operations ProxyPass /cool https://127.0.0.1:9980/cool ProxyPassReverse /cool https://127.0.0.1:9980/cool # Compatibility with integrations that use the /lool/convert-to endpoint ProxyPass /lool https://127.0.0.1:9980/cool ProxyPassReverse /lool https://127.0.0.1:9980/cool RewriteEngine on RewriteCond %{SERVER_NAME} =office.vuv-verwaltung.de RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent] \u0026lt;/VirtualHost\u0026gt; \u0026lt;VirtualHost *:443\u0026gt; ServerName office.domain.de ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined SSLEngine on AllowEncodedSlashes NoDecode SSLProxyEngine On SSLProxyVerify None SSLProxyCheckPeerCN Off SSLProxyCheckPeerName Off ProxyPreserveHost On # static html, js, images, etc. served from coolwsd # browser is the client part of Collabora Online ProxyPass /browser https://127.0.0.1:9980/browser retry=0 ProxyPassReverse /browser https://127.0.0.1:9980/browser # WOPI discovery URL ProxyPass /hosting/discovery https://127.0.0.1:9980/hosting/discovery retry=0 ProxyPassReverse /hosting/discovery https://127.0.0.1:9980/hosting/discovery # Capabilities ProxyPass /hosting/capabilities https://127.0.0.1:9980/hosting/capabilities retry=0 ProxyPassReverse /hosting/capabilities https://127.0.0.1:9980/hosting/capabilities # Main websocket ProxyPassMatch \u0026#34;/cool/(.*)/ws$\u0026#34; wss://127.0.0.1:9980/cool/$1/ws nocanon # Admin Console websocket ProxyPass /cool/adminws wss://127.0.0.1:9980/cool/adminws # Download as, Fullscreen presentation and Image upload operations ProxyPass /cool https://127.0.0.1:9980/cool ProxyPassReverse /cool https://127.0.0.1:9980/cool # Compatibility with integrations that use the /lool/convert-to endpoint ProxyPass /lool https://127.0.0.1:9980/cool ProxyPassReverse /lool https://127.0.0.1:9980/cool Include /etc/letsencrypt/options-ssl-apache.conf SSLCertificateFile /etc/letsencrypt/live/cloud.domain.de/fullchain.pem SSLCertificateKeyFile /etc/letsencrypt/live/cloud.domain.de/privkey.pem \u0026lt;/VirtualHost\u0026gt; Diese Problemlösung habe ich ebenfalls in das Nextcloud-Forum gepostet3. Dort gibt es eine exzellente Anleitung über die Einrichtung von Nextcloud in Docker.\n  Nextcloud Hub II brings major overhaul, introducing Nextcloud Office, P2P backup, more\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n Collabora Documentation: Proxy settings\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n HowTo: Ubuntu + Docker + Nextcloud + Talk + Collabora\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n   ","date":"Jan 25","permalink":"https://xenophil90.github.io/posts/nextcloud-23-docker-apache-2-collabora-nach-update-wieder-lauffa%CC%88hig-bekommen/","tags":["nextcloud","docker","collabora","apache2"],"title":"Nextcloud 23 (Docker + Apache 2): Collabora nach Update wieder lauffähig bekommen"},{"categories":null,"contents":"","date":"Jan 01","permalink":"https://xenophil90.github.io/archiv/","tags":null,"title":"Archiv"},{"categories":null,"contents":"   Angaben gemäß § 5 TMG  Phil Krämer\nFreiherr-vom-Stein Str. 2\n56410 Montabaur\n   Kontakt  Telefon: +49 176 834 222 91\nE-Mail: ich@phil-kraemer.de\nQuelle: eRecht24\n","date":"Jan 01","permalink":"https://xenophil90.github.io/impressum/","tags":null,"title":"Impressum"}]